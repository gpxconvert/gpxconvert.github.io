<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Free GPX ⇄ KML ⇄ GeoJSON Converter & Merger</title>
<meta name="description" content="Drop in GPX, KML, and GeoJSON files, preview on a map, merge tracks, and download in your preferred format. 100% client-side — your data never leaves your device.">
<link rel="canonical" href="https://gpxconvert.github.io/">
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />

<!-- AdSense (clean, correct) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3932111812673824" crossorigin="anonymous"></script>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Converters -->
<script src="https://unpkg.com/@tmcw/togeojson@5.9.0/dist/togeojson.umd.js"></script>
<script src="https://unpkg.com/tokml@0.4.0/tokml.js"></script>
<script src="https://unpkg.com/togpx@0.5.0/togpx.js"></script>

<style>
:root{--bg:#0b1020;--panel:#12172a;--border:#202741;--fg:#e6e8ef;--muted:#9aa2b1}
*{box-sizing:border-box}body{margin:0;font:16px/1.5 system-ui,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:var(--fg)}
main{max-width:980px;margin:24px auto;padding:0 16px}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:16px;margin:12px 0}
h1{margin:0 0 8px 0} .muted{color:var(--muted)}
.controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
button,input[type=file]{border:0;border-radius:10px;padding:10px 14px;background:#1b2344;color:#dfe7ff;font-weight:600;cursor:pointer}
input[type=file]{padding:10px;background:#0d1328;border:1px dashed #2a3555;color:#9aa2b1}
#map{height:60vh;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.small{font-size:13px}
ul.links{padding-left:18px}
a{color:#58a6ff;text-decoration:none}
.drop-hint{border:1px dashed #2a3555;border-radius:10px;padding:8px 10px;margin-top:8px;color:var(--muted)}
</style>
</head>
<body>
<main>
  <h1>Free GPX ⇄ KML ⇄ GeoJSON Converter & Merger</h1>
  <p class="muted">Drop in GPX, KML, and GeoJSON files, preview them on the map, merge tracks, and download in your preferred format. 100% client-side — your data never leaves your device.</p>

  <div id="ad-top" class="panel small muted">Ad space (paste your AdSense display unit here after approval)</div>

  <div class="panel">
    <div class="controls">
      <input id="file" type="file" multiple accept=".gpx,.kml,.geojson,.json,application/gpx+xml,application/vnd.google-earth.kml+xml,application/geo+json">
      <button id="dlGeoJSON">Download GeoJSON</button>
      <button id="dlKML">Download KML</button>
      <button id="dlGPX">Download GPX</button>
      <button id="clear">Clear</button>
    </div>
    <div class="drop-hint small">Tip: you can drag & drop files anywhere on this page</div>
  </div>

  <div id="map"></div>

  <div class="panel small">
    <h3>FAQ</h3>
    <p><strong>Is anything uploaded?</strong><br>No. Everything happens in your browser. You can even go offline after this page loads.</p>
    <p><strong>Which file sizes work?</strong><br>Most hobby tracks work fine (dozens of MB). Extremely large datasets may struggle on older devices.</p>
    <p><strong>What data do you collect?</strong><br>None by default. If you add analytics, disclose it on the Privacy page.</p>
  </div>

  <div class="panel small">
    <h3>Guides</h3>
    <ul class="links">
      <li><a href="/gpx-to-kml.html">Convert GPX to KML online</a></li>
      <li><a href="/merge-gpx-files.html">Merge GPX files</a></li>
      <li><a href="/view-gpx-online.html">View GPX on a map</a></li>
      <li><a href="/geojson-to-csv.html">GeoJSON to CSV</a></li>
      <li><a href="/csv-to-geojson.html">CSV to GeoJSON</a></li>
      <li><a href="/PRIVACY.html">Privacy</a></li>
    </ul>
  </div>

  <p class="small muted">Leaflet | © OpenStreetMap contributors</p>
  <p class="small muted">Made with ♥ for hikers, runners, and map nerds. Beta — please verify results before critical use. · <a href="/about.html">About</a></p>
</main>

<script>
let map, layerGroup, allFeatures=[];
function initMap(){
  map = L.map('map',{zoomControl:true}).setView([20,0],2);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'&copy; OpenStreetMap contributors'
  }).addTo(map);
  layerGroup = L.layerGroup().addTo(map);
}
function addGeoJSON(geojson){
  const fc = normalizeToFeatureCollection(geojson);
  allFeatures.push(...fc.features);
  const layer = L.geoJSON(fc);
  layer.addTo(layerGroup);
  try{ map.fitBounds(layer.getBounds(),{maxZoom:14,padding:[20,20]}); }catch(e){}
}
function normalizeToFeatureCollection(obj){
  if(!obj) return {type:'FeatureCollection',features:[]};
  if(obj.type==='FeatureCollection') return obj;
  if(obj.type==='Feature') return {type:'FeatureCollection',features:[obj]};
  if(obj.type){ return {type:'FeatureCollection',features:[{type:'Feature',geometry:obj,properties:{}}]}; }
  return {type:'FeatureCollection',features:[]};
}
async function handleFiles(fileList){
  for(const f of fileList){
    const text = await f.text();
    const ext = (f.name.split('.').pop()||'').toLowerCase();
    try{
      if(ext==='geojson' || ext==='json'){
        addGeoJSON(JSON.parse(text));
      }else if(ext==='kml'){
        const doc = new DOMParser().parseFromString(text,'text/xml');
        if(!window.toGeoJSON) throw new Error('toGeoJSON not loaded');
        addGeoJSON(window.toGeoJSON.kml(doc));
      }else if(ext==='gpx'){
        const doc = new DOMParser().parseFromString(text,'text/xml');
        if(!window.toGeoJSON) throw new Error('toGeoJSON not loaded');
        addGeoJSON(window.toGeoJSON.gpx(doc));
      }else{
        try{ addGeoJSON(JSON.parse(text)); }
        catch{ alert('Unsupported file: '+f.name); }
      }
    }catch(err){
      console.error(err);
      alert('Failed to parse '+f.name+': '+err.message);
    }
  }
}
function mergedFC(){ return {type:'FeatureCollection',features:allFeatures}; }
function download(name, mime, dataStr){
  const blob=new Blob([dataStr],{type:mime});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download=name; document.body.appendChild(a); a.click();
  setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 0);
}
document.getElementById('file').addEventListener('change',e=>handleFiles(e.target.files));
document.getElementById('dlGeoJSON').addEventListener('click',()=>{
  const fc=mergedFC(); download('data.geojson','application/geo+json',JSON.stringify(fc));
});
document.getElementById('dlKML').addEventListener('click',()=>{
  if(typeof window.tokml!=='function'){ alert('KML exporter failed to load.'); return; }
  const kml=window.tokml(mergedFC()); download('data.kml','application/vnd.google-earth.kml+xml',kml);
});
document.getElementById('dlGPX').addEventListener('click',()=>{
  if(typeof window.togpx!=='function'){ alert('GPX exporter failed to load.'); return; }
  const gpx=window.togpx(mergedFC()); download('data.gpx','application/gpx+xml',gpx);
});
document.getElementById('clear').addEventListener('click',()=>{
  allFeatures=[]; layerGroup.clearLayers(); map.setView([20,0],2);
});
['dragenter','dragover','dragleave','drop'].forEach(ev=>window.addEventListener(ev,e=>{e.preventDefault();e.stopPropagation();}));
window.addEventListener('drop',e=>{ if(e.dataTransfer?.files?.length) handleFiles(e.dataTransfer.files); });
initMap();
</script>
</body></html>
